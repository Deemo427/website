(function($){'use strict';var $window=$(window);$.fn.extraSlider=function(options){var opt=$.extend({'auto':!1,'autoPauseEvents':'mouseenter','autoResumeEvents':'mouseleave','direction':'x','draggable':!1,'draggableOptions':{},'ease':Quad.easeOut,'keyboard':!1,'itemSelector':'>*','margin':1,'minDrag':0,'navigation':null,'pagination':null,'paginateContent':'','speed':0.5,'startAt':0,'type':'slide','waitBeforeMove':!1,'onGotoNext':null,'onGotoPrev':null,'onInit':null,'onMoveEnd':null,'onMoveStart':null,'onPause':null,'onResume':null,'onUpdate':null,'onUpdateClones':null,'onDragStart':null,'onDragEnd':null},options);this.each(function(){var $this=$(this),$items=$this.find(opt.itemSelector).addClass("extra-slider-item"),numClones=0,singleDimension=0,total=$items.length-1,currentItem=opt.startAt,previousItem=total,paginate=opt.pagination&&opt.pagination.length>0,navigate=opt.navigation&&opt.navigation.length>0,i=0,autoTween,pauseEvents="pause",resumeEvents="resume",isPaused=!1,drag;if(opt.draggable){opt.margin+=1}
if(opt.autoPauseEvents&&opt.autoPauseEvents!=''){pauseEvents+=(" "+opt.autoPauseEvents)}
if(opt.autoResumeEvents&&opt.autoResumeEvents!=''){resumeEvents+=(" "+opt.autoResumeEvents)}
function initialize(){var tweenItemProperties={},tweenSliderProperties={};$items.each(function(index){$(this).data('index',index);$(this).data('index-absolute',index)});$this.addClass('extra-slider-'+opt.type);if(opt.type==="slide"){$this.addClass('extra-slider-direction-'+opt.direction);updateClones();tweenSliderProperties[opt.direction+'Percent']=(currentItem-numClones)*100;TweenMax.set($this,tweenSliderProperties)}else if(opt.type==="fade"){$items.each(function(index){if(index===currentItem){TweenMax.set($(this),{autoAlpha:1,xPercent:-(index*100),zIndex:total+1})}else{TweenMax.set($(this),{autoAlpha:0,xPercent:-(index*100),zIndex:total-index+1})}})}else if(opt.type==="curtain"){$items.each(function(index){if(index===currentItem){TweenMax.set($(this),{xPercent:-(index*100),zIndex:total+1})}else{TweenMax.set($(this),{xPercent:-(index*100),zIndex:total-index+1})}})}else if(opt.type==="custom"){}
$items.not(".extra-slider-clone").first().addClass("extra-slider-first")}
function update(){if(opt.type==='slide'){adjustPosition()}
$items.removeClass('extra-slider-active');$items.eq(currentItem+numClones).addClass('extra-slider-active');if(opt.onUpdate){opt.onUpdate($items.eq(currentItem+numClones),currentItem)}
$this.trigger('extra:slider:updated',[$items.eq(currentItem+numClones),currentItem]);if(drag){drag.update()}}
function adjustPosition(){if(opt.type==='slide'&&$this[0]._gsTransform===undefined){return}
var needAdjustement=!1,currentItemReference=currentItem,currentPosition=0,adjustedPosition=0,targetPosition=0,delta=0,position=0,tweenProperties={};if(currentItem>total){needAdjustement=!0;currentItem=currentItem%(total+1)}else if(currentItem<0){needAdjustement=!0;currentItem=currentItem+(total+1)}
if(needAdjustement&&opt.type==='slide'){currentPosition=$this[0]._gsTransform[opt.direction+'Percent'];targetPosition=-(currentItemReference+numClones);targetPosition*=100;delta=targetPosition-currentPosition;position=-(((currentItem+numClones)*100)+delta);tweenProperties[opt.direction+'Percent']=position;TweenMax.set($this,tweenProperties)}}
function endHandler(time,previousItem){if(opt.type==="slide"){adjustPosition()}
$items.eq(currentItem+numClones).addClass('extra-slider-active');if(!isNaN(opt.auto)&&opt.auto>0){autoSlide()}
if(opt.onMoveEnd&&time>0){opt.onMoveEnd($items.eq(currentItem+numClones),currentItem)}
$this.trigger('extra:slider:moveEnd',[$items.eq(currentItem+numClones),currentItem])}
function gotoPage(newPage,time){time=(time!==undefined)?time:opt.speed;if(opt.waitBeforeMove===!0&&TweenMax.isTweening($this)){return}
var position,tweenProperties={onComplete:endHandler,onCompleteParams:[time],ease:opt.ease},tweenPropertiesTarget=null;$items.removeClass('extra-slider-active');previousItem=currentItem;currentItem=newPage;adjustPosition();if(opt.onMoveStart&&time>0){opt.onMoveStart($items.eq(currentItem+numClones),currentItem,previousItem,newPage)}
$this.trigger('extra:slider:moveStart',[$items.eq(currentItem+numClones),currentItem,previousItem,newPage]);if(paginate){opt.pagination.each(function(){$(this).find("a").removeClass("extra-slider-link-active").eq(currentItem).addClass("extra-slider-link-active")})}
if(opt.type==="slide"){position=-(currentItem+numClones);position=position*100;tweenProperties[opt.direction+'Percent']=position;TweenMax.to($this,time,tweenProperties)}else if(opt.type==="fade"){$items.each(function(index,element){if(index===currentItem){$items.eq(index).css("zIndex",3)}else if(index===previousItem){$items.eq(index).css("zIndex",2)}else{$items.eq(index).css("zIndex",1)}});tweenProperties.autoAlpha=1;TweenMax.fromTo($items.eq(currentItem),time,{autoAlpha:0},tweenProperties)}else if(opt.type==="curtain"){tweenPropertiesTarget={};$items.each(function(index,element){if(index===currentItem){$items.eq(index).css("zIndex",3)}else if(index===previousItem){$items.eq(index).css("zIndex",2)}else{$items.eq(index).css("zIndex",1)}});if(newPage>=previousItem){tweenProperties.width='0%';tweenProperties.left='100%';tweenPropertiesTarget.width='100%';tweenPropertiesTarget.left='0%'}else{tweenProperties.width='0%';tweenProperties.left='0%';tweenPropertiesTarget.width='100%';tweenPropertiesTarget.left='0%'}
TweenMax.fromTo($items.eq(currentItem),time,tweenProperties,tweenPropertiesTarget)}else if(opt.type==="custom"){$items.each(function(index,element){});TweenMax.to($this,time,tweenProperties)}}
function updateClones(){$items.find('.extra-slider-clone').remove();$items.first().before($items.slice(-opt.margin).clone(!0).addClass('extra-slider-clone'));$items.last().after($items.slice(0,opt.margin).clone(!0).addClass('extra-slider-clone'));$items=$this.find(opt.itemSelector);var $clones=$items.filter('.extra-slider-clone');numClones=Math.max(0,$clones.length/2);$clones.each(function(){var $clone=$(this),index=$clone.data('index');if($clone.index()<opt.margin){index=index-(total+1)}else{index=index+(total+1)}
$clone.data('index-absolute',index)});if(opt.onUpdateClones){opt.onUpdateClones($items.eq(currentItem+numClones),currentItem)}
$this.trigger('extra:slider:updateClones',[$items.eq(currentItem+numClones),currentItem])}
function gotoNext(time){if(opt.onGotoNext){opt.onGotoNext($items.eq(currentItem+numClones),currentItem)}
$this.trigger('extra:slider:onGotoNext',[$items.eq(currentItem+numClones),currentItem]);time=(time!==undefined)?time:opt.speed;gotoPage(currentItem+1,time)}
function gotoPrev(time){if(opt.onGotoPrev){opt.onGotoPrev($items.eq(currentItem+numClones),currentItem)}
$this.trigger('extra:slider:onGotoPrev',[$items.eq(currentItem+numClones),currentItem]);time=time!==undefined?time:opt.speed;gotoPage(currentItem-1,time)}
function autoSlide(){if(autoTween){autoTween.kill()}
autoTween=TweenMax.delayedCall(opt.auto,function(){gotoNext();autoSlide()})}
$(this).on('extra:slider:update',function(){update()});$(this).on('extra:slider:next',function(event,time){gotoNext(time)});$(this).on('extra:slider:prev',function(event,time){gotoPrev(time)});$(this).on('extra:slider:goto',function(event,page,time){time=time!==undefined?time:opt.speed;gotoPage(page,time)});$(this).on('extra:slider:pause',function(event,page,time){autoTween.pause()});$(this).on('extra:slider:resume',function(event,page,time){autoTween.resume()});if(navigate){opt.navigation.each(function(index,element){var $_navigation=$(this);if($_navigation.find('a').length<2){$("<a>",{'href':'#','class':'next'}).appendTo($_navigation);$("<a>",{'href':'#','class':'prev'}).appendTo($_navigation)}
$('a.prev',$_navigation).on('click',function(event){event.preventDefault();gotoPrev()});$('a.next',$_navigation).on('click',function(event){event.preventDefault();gotoNext()})})}
if(paginate){opt.pagination.each(function(){var $_pagination=$(this);for(i=0;i<=total;i+=1){$("<a>",{'href':'#'}).html(opt.paginateContent!==''?opt.paginateContent.replace("%d",(i+1)):i+1).appendTo($_pagination)}
$_pagination.find("a").removeClass('extra-slider-link-active').eq(currentItem).addClass('extra-slider-link-active');$('a',$_pagination).each(function(index,item){var $link=$(item);$link.click(function(event){event.preventDefault();gotoPage(index)})})})}
if(opt.keyboard){$window.on('keydown',function(event){if(event.which===40||event.which===39){event.preventDefault();gotoNext()}
if(event.which===38||event.which===37){event.preventDefault();gotoPrev()}})}
if(!isNaN(opt.auto)&&opt.auto>0){autoSlide();$this.on(pauseEvents,function(event){if(isPaused){return}
event.stopImmediatePropagation();isPaused=!0;if(opt.onPause){opt.onPause($items.eq(currentItem+numClones),currentItem)}
$this.trigger('extra:slider:paused',[$items.eq(currentItem+numClones),currentItem]);autoTween.pause()}).on(resumeEvents,function(event){if(!isPaused){return}
isPaused=!1;if(opt.onResume){opt.onResume($items.eq(currentItem+numClones),currentItem)}
$this.trigger('extra:slider:resumed',[$items.eq(currentItem+numClones),currentItem]);autoTween.resume()})}
if(opt.draggable&&opt.type==='slide'){$this.addClass('extra-slider-draggable');if(Draggable!==undefined){var draggableOpt=$.extend({type:opt.direction,cursor:'move',lockAxis:!1,throwProps:!1,zIndexBoost:!1,onDragStart:function(){singleDimension=opt.direction==='x'?$items.first().width():$items.first().height();if(opt.onDragStart){opt.onDragStart($items.eq(currentItem+numClones),currentItem)}
$this.trigger('extra:slider:onDragStart',[$items.eq(currentItem+numClones),currentItem])},onDragEnd:function(){var realPosition=(drag[opt.direction]/singleDimension*100)-((currentItem-numClones)*100),draggedPage=-(realPosition/100-numClones),targetPage,tweenProperties={},position;if(opt.minDrag>0&&Math.abs(drag[opt.direction])<=opt.minDrag){targetPage=currentItem}else if(draggedPage>currentItem){targetPage=Math.ceil(draggedPage)}else{targetPage=Math.floor(draggedPage)}
position=-(draggedPage+numClones);position=position*100;tweenProperties[opt.direction]=0;tweenProperties[opt.direction+'Percent']=position;TweenMax.set($this,tweenProperties);gotoPage(targetPage);if(opt.onDragEnd){opt.onDragEnd($items.eq(currentItem+numClones),currentItem)}
$this.trigger('extra:slider:onDragEnd',[$items.eq(currentItem+numClones),currentItem])}},opt.draggableOptions);Draggable.create($this,draggableOpt);drag=Draggable.get($this)}else{console.log('Draggable is not detected. You need to load it to enable drag. More info here : http://www.greensock.com/draggable/')}}
initialize();update();if(opt.onInit){opt.onInit($items.eq(currentItem+numClones),currentItem)}
$this.addClass('extra-slider-processed').trigger('extra:slider:init',[$items.eq(currentItem+numClones),currentItem]);gotoPage(currentItem,0)});return this}}(jQuery))