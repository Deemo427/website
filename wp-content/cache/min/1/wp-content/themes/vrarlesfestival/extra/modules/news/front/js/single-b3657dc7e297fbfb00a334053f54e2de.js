var NewsSingle=ExtraView.extend({namespace:'news-single',extraOnEnter:function($container){var _this=this;initSectionTitle($container);initNewsTicketing($container);initScrollContent($container);this.imagesLoaded=!0;$window.trigger("extra:responsiveImage:init",[$container]);TweenMax.set($container,{clearProps:'visibility'})},getTimelineIn:function(){var deferred=Barba.Utils.deferred(),$container=$(this.container),timeline=new TimelineMax();if(app.previousView&&app.previousView.namespace==='news-single'){timeline.set($("#transition-mask2,#transition-mask1"),{clearProps:'all'});timeline.set($container,{clearProps:'visibility',zIndex:2,position:'absolute',top:0,left:0,width:'100%'});timeline.staggerFrom($container.find('.next-button, .previous-button'),0.3,{scale:0},0.1);timeline.add(function(){$('#barba-wrapper').find('.barba-container').not($container).remove();TweenMax.set($container,{clearProps:'all'});$(window).trigger('extra:scrollanimator:resize');$(window).trigger('extra:sticky:resize')});timeline.add(function(){deferred.resolve()});timeline.staggerTo($container.find('.mask').get().reverse(),1,{scaleX:0,ease:Quad.easeInOut},0.1,'+=0.5')}else{timeline.add(function(){transitionIn($container)});timeline.staggerFrom($container.find('.header .cloud'),1.2,{yPercent:20,opacity:0,ease:Back.easeOut.config(1)},0.2,0);timeline.set(window,{scrollTo:0});timeline.staggerFrom([$container.find('.news-header'),$container.find('.main-content')],0.6,{scaleX:0,clearProps:'transform',ease:Quad.easeInOut},0.2);timeline.staggerTo($container.find('.mask'),0.6,{scaleX:0,ease:Quad.easeOut},0.1,'-=0.3');timeline.add(function(){deferred.resolve()});timeline.staggerFrom($container.find('.nav-button'),0.3,{scale:0},0.2,'+=O.2')}
return{deferred:deferred.promise,timeline:timeline}},getTimelineOut:function(){if(Barba.Pjax.getCurrentUrl().indexOf(extra_news_params)>=0&&Barba.Pjax.getCurrentUrl().length!==extra_news_params.length){var $container=$(app.currentContainer),timeline=new TimelineMax(),scroll=$(window).scrollTop();if(scroll>0){timeline.to(window,Math.max(0.2,scroll/1000),{scrollTo:0,ease:Quad.easeInOut})}
timeline.staggerTo($container.find('.next-button, .previous-button'),0.3,{scale:0},0.1);timeline.staggerTo($container.find('.mask'),0.6,{scaleX:1},0.1);return timeline}else{return transitionOut()}}});NewsSingle.init();function newsInitNavigation($container){$container.find('.nav-button.next-button').on("click",function(){NewsSingle.internalFrom="next"});$container.find('.nav-button.previous-button').on("click",function(){NewsSingle.internalFrom="previous"});$container.find('.nav-button').each(function(){var $button=$(this),$target=$container.find('.mega-titles').find('.'+$button.data("target")),introComplete=!1,isAnimating=!1,requestOut=!1,requestIn=!1;$button.on("mouseenter",function(){if(requestOut){requestOut=!1}
if(!isAnimating){requestIn=!1;requestOut=!1;isAnimating=!0;introComplete=!1;generateTimelineIn($target)}else{requestIn=!0}}).on("mouseleave",function(){if(requestIn){requestIn=!1}
if(introComplete){requestOut=!1;requestIn=!1;introComplete=!1;generateTimelineOut($target)}else{requestOut=!0}});function generateTimelineIn(){var timeline=new TimelineMax();timeline.set($target,{opacity:1});timeline.staggerFromTo($target.find('.letter'),0.6,{cycle:{yPercent:function(index){return((index%2)?-110:110)}}},{cycle:{yPercent:function(index){return((index%2)?0:0)}},clearProps:'all'},0.05,'-=1');timeline.add(function(){introComplete=!0;if(requestOut){isAnimating=!0;introComplete=!1;requestOut=!1;generateTimelineOut()}})}
function generateTimelineOut(){var timeline=new TimelineMax();timeline.staggerTo($target.find('.letter'),0.6,{cycle:{yPercent:function(index){return((index%2)?110:-110)}}},0.05,'-=1');timeline.set($target.find(".letters"),{clearProps:'all'});timeline.set($target,{opacity:0});timeline.add(function(){isAnimating=!1;if(requestIn){isAnimating=!0;introComplete=!1;requestIn=!1;generateTimelineIn()}})}
Barba.Dispatcher.on("initStateChange",function(){if(app.currentContainer===$container[0]){$button.trigger("mouseleave")}})})}function initNewsTicketing($container){var isActive=!0,isFixed=!1,$ticketing=$('.ticketing'),wWidth=window.innerWidth;function update(){wWidth=window.innerWidth;if(wWidth>690&&wWidth<960){if(!isFixed){isFixed=!0;TweenMax.to($ticketing,0.4,{x:15})}}else{if(isFixed){isFixed=!1;TweenMax.to($ticketing,0.2,{x:0})}}}
$(window).on("extra:resize",update);update();function destroy(){if(!isActive||app.currentContainer===$container[0]){return}
$(window).off("extra:resize",update);isActive=!1;if(app.currentView.namespace!=="news-single"){TweenMax.to($ticketing,0.2,{x:0})}}
Barba.Dispatcher.on("transitionCompleted",destroy)}